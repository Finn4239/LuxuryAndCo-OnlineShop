@using Umbraco.Cms.Web.Common.PublishedModels;
@inherits Umbraco.Cms.Web.Common.Views.UmbracoViewPage<ContentModels.WatchesPage>
@using ContentModels = Umbraco.Cms.Web.Common.PublishedModels;
@using LuxuryAndCo.OnlineShop.Models
@using Umbraco.Cms.Core.Models.Blocks

@{
    Layout = "master.cshtml";
    var products = Model.Value<IEnumerable<BlockListItem>>("products");
}

<div class="container mx-auto px-6 py-12">
    <h1 class="text-3xl font-bold mb-6 text-center">Luxury @Model.Value("productType")</h1>
    <p class="text-gray-600 text-center mb-10">Explore our @Model.Value("productType") collection highlights.
        We currently offer @(products?.Count() ?? 0) watches.</p>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10">
        @foreach (var product in products)
        {
            var productContent = product.Content;
            var vm = new ProductCardViewModel {
                Brand = productContent.Value<string>("productBrand"),
                Name = productContent.Value<string>("productName"),
                Price = productContent.Value<decimal>("productPrice"),
                ImageUrl = productContent.Value<IPublishedContent>("productShowImg")?.Url() ?? ""
            };

            @await Html.PartialAsync("Partials/_ProductCard", vm)
        }
    </div>
</div>

<script>
    function addToCart(product, price) {
        alert(product + " has been added to your cart for $" + price);
        // Later: replace this alert with real cart logic
        }
</script>
